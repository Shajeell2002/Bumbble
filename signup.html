<script>
function sendVerification(event){
    event.preventDefault();
    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;

    // Generate 6-digit OTP
    const passcode = Math.floor(100000 + Math.random() * 900000);

    // Set expiry time
    const expiry = new Date(Date.now() + 15 * 60 * 1000);
    const time = expiry.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

    // Store OTP in localStorage
    localStorage.setItem(email+"_otp", passcode);

    // Prepare verification link
    const verifyLink = `https://bumbble.in/verify.html?email=${encodeURIComponent(email)}`;

    // Send via EmailJS
    emailjs.send(SERVICE_ID, TEMPLATE_ID, {
        to_name: name,
        to_email: email,
        passcode: passcode,
        time: time,
        verify_link: verifyLink
    })
    .then(function(response){
        alert('Verification email sent! Check your inbox.');
        document.getElementById('signupForm').reset();
    }, function(error){
        console.log(error);
        alert('Failed to send verification email. Check console for details.');
    });
}
</script>
