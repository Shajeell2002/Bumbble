<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bumbble - Signup</title>

  <style>
    /* Reset */
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family: Arial, sans-serif; background:#fefefe; color:#333; display:flex; flex-direction:column; min-height:100vh; }

    /* Header */
    header { display:flex; justify-content:space-between; align-items:center; padding:20px; background:#ffcb2b; }
    header h1 { font-size:24px; }
    nav a { margin:0 10px; text-decoration:none; color:#333; font-weight:bold; }
    nav a:hover { text-decoration:underline; }

    /* Signup Section */
    .signup-container {
      flex:1;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:40px 20px;
      background:#fff8dc;
    }
    .signup-box {
      background:#fff;
      padding:30px 40px;
      border-radius:12px;
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
      width:100%;
      max-width:400px;
      text-align:center;
    }
    .signup-box h2 {
      margin-bottom:20px;
      font-size:26px;
      color:#333;
    }
    .signup-box input, .signup-box select {
      width:100%;
      padding:12px;
      margin:10px 0;
      border:1px solid #ccc;
      border-radius:8px;
      font-size:16px;
    }
    .signup-box button {
      width:100%;
      background:#ffcb2b;
      border:none;
      padding:14px;
      margin-top:15px;
      font-size:18px;
      font-weight:bold;
      cursor:pointer;
      border-radius:30px;
      transition:background 0.3s;
    }
    .signup-box button:hover {
      background:#e6b800;
    }
    .error-message {
      color:red;
      margin-top:10px;
    }

    /* Footer */
    footer { text-align:center; padding:20px; background:#f1f1f1; margin-top:auto; }

    @media(max-width:768px) {
      .signup-box { padding:20px; }
    }
  </style>
</head>
<body>

  <header>
    <h1>Bumbble</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="login.html">Login</a>
      <a href="signup.html">Sign Up</a>
    </nav>
  </header>

  <section class="signup-container">
    <div class="signup-box">
      <h2>Create Your Account</h2>
      <form id="signupForm">
        <input type="text" id="username" placeholder="Enter your name" required>
        <input type="email" id="email" placeholder="Enter email" required>
        <input type="password" id="password" placeholder="Enter password" required>
        
        <select id="gender" required>
          <option value="">Select Gender</option>
          <option value="Female">Female</option>
          <option value="Male">Male</option>
          <option value="Other">Other</option>
        </select>

        <input type="number" id="age" placeholder="Enter your age" required>

        <button type="submit">Sign Up</button>
      </form>
      <p id="errorMsg" class="error-message"></p>
    </div>
  </section>

  <footer>
    <p>&copy; 2025 Bumbble. All rights reserved.</p>
  </footer>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <script>
    // ðŸ”¹ Replace with your Firebase config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);

    const auth = firebase.auth();
    const db = firebase.database();

    // Signup form handler
    document.getElementById("signupForm").addEventListener("submit", function(e) {
      e.preventDefault();

      const username = document.getElementById("username").value;
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      const gender = document.getElementById("gender").value;
      const age = document.getElementById("age").value;

      auth.createUserWithEmailAndPassword(email, password)
        .then(cred => {
          const uid = cred.user.uid;

          // Save user public data
          db.ref("users/" + uid + "/public").set({
            name: username,
            gender: gender,
            age: age,
            online: true
          });

          // Save private data
          db.ref("users/" + uid + "/private").set({
            email: email
          });

          // Presence system
          const userStatusRef = db.ref("users/" + uid + "/public/online");
          userStatusRef.set(true);
          userStatusRef.onDisconnect().set(false);

          // Redirect
          window.location.href = "friends.html";
        })
        .catch(error => {
          document.getElementById("errorMsg").innerText = error.message;
        });
    });
  </script>
</body>
</html>
