    const uid=row.dataset.uid;
    const badge=row.querySelector('.badge');
    if(unreadCounters[uid]){
      if(badge) badge.textContent=unreadCounters[uid];
      else {
        const span=document.createElement('span');
        span.className='badge';
        span.textContent=unreadCounters[uid];
        row.querySelector('div').appendChild(span);
      }
    } else if(badge) badge.remove();
  });
}
dragElement(chatModal);
function dragElement(elmnt){
  let pos1=0,pos2=0,pos3=0,pos4=0;
  const header=document.getElementById("chatHeader");
  if(header) header.onmousedown=dragMouseDown; else elmnt.onmousedown=dragMouseDown;
  function dragMouseDown(e){ e=e||window.event; e.preventDefault(); pos3=e.clientX; pos4=e.clientY; document.onmouseup=closeDragElement; document.onmousemove=elementDrag; }
  function elementDrag(e){ e=e||window.event; e.preventDefault(); pos1=pos3-e.clientX; pos2=pos4-e.clientY; pos3=e.clientX; pos4=e.clientY; elmnt.style.top=(elmnt.offsetTop-pos2)+'px'; elmnt.style.left=(elmnt.offsetLeft-pos1)+'px'; }
  function closeDragElement(){ document.onmouseup=null; document.onmousemove=null; }
}
</script>
</body>
</html>
